(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19],{6910:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/articles/lazyState-React",function(){return s(5375)}])},6295:function(e,n,s){"use strict";s.d(n,{B:function(){return p}});var a=s(5893),t=s(9008),c=s.n(t),i=s(1163),l=s(5649),o=s(6010);function r(e){let{children:n,className:s}=e;return(0,a.jsx)("div",{className:(0,o.Z)(s,"prose dark:prose-invert"),children:n})}var u=s(3652);function d(e){return(0,a.jsx)("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...e,children:(0,a.jsx)("path",{d:"M7.25 11.25 3.75 8m0 0 3.5-3.25M3.75 8h8.5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function p(e){let{children:n,meta:s,isRssFeed:t=!1,previousPathname:o}=e,p=(0,i.useRouter)();return t?n:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c(),{children:[(0,a.jsx)("title",{children:`${s.title} - Nuri Kim`}),(0,a.jsx)("meta",{name:"description",content:s.description})]}),(0,a.jsx)(l.W,{className:"mt-16 lg:mt-32",children:(0,a.jsx)("div",{className:"xl:relative",children:(0,a.jsxs)("div",{className:"mx-auto max-w-2xl",children:[o&&(0,a.jsx)("button",{type:"button",onClick:()=>p.back(),"aria-label":"Go back to articles",className:"group mb-8 flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-md shadow-zinc-800/5 ring-1 ring-zinc-900/5 transition dark:border dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0 dark:ring-white/10 dark:hover:border-zinc-700 dark:hover:ring-white/20 lg:absolute lg:-left-5 lg:-mt-2 lg:mb-0 xl:-top-1.5 xl:left-0 xl:mt-0",children:(0,a.jsx)(d,{className:"h-4 w-4 stroke-zinc-500 transition group-hover:stroke-zinc-700 dark:stroke-zinc-500 dark:group-hover:stroke-zinc-400"})}),(0,a.jsxs)("article",{children:[(0,a.jsxs)("header",{className:"flex flex-col",children:[(0,a.jsx)("h1",{className:"mt-6 text-4xl font-bold tracking-tight text-zinc-800 dark:text-zinc-100 sm:text-5xl",children:s.title}),(0,a.jsxs)("time",{dateTime:s.date,className:"order-first flex items-center text-base text-zinc-400 dark:text-zinc-500",children:[(0,a.jsx)("span",{className:"h-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"}),(0,a.jsx)("span",{className:"ml-3",children:(0,u.p)(s.date)})]})]}),(0,a.jsx)(r,{className:"mt-8",children:n})]})]})})})]})}},3652:function(e,n,s){"use strict";function a(e){return new Date(`${e}T00:00:00Z`).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"})}s.d(n,{p:function(){return a}})},5375:function(e,n,s){"use strict";s.r(n),s.d(n,{meta:function(){return i}});var a=s(5893),t=s(1151),c=s(6295);let i={author:"Nuri Kim",date:"2022-07-07",title:"Decrease Loading Time in React with Lazy State Initialization"},l=e=>(0,a.jsx)(c.B,Object.assign({meta:i},e));function o(e){let n=Object.assign({h2:"h2",p:"p",pre:"pre",code:"code",span:"span"},(0,t.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{children:"The Issue"}),"\n",(0,a.jsx)(n.p,{children:"In React, every time state changes, its parent function component is rerun. This can greatly increase loading times--especially if large memory consuming processes are being rerun (e.g. localStorage)."}),"\n",(0,a.jsx)(n.pre,{className:"language-js",children:(0,a.jsxs)(n.code,{className:"language-js",children:[(0,a.jsx)(n.span,{className:"token keyword module",children:"export"})," ",(0,a.jsx)(n.span,{className:"token keyword module",children:"default"})," ",(0,a.jsx)(n.span,{className:"token function",children:(0,a.jsx)(n.span,{className:"token maybe-class-name",children:"App"})})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(n.span,{className:"token comment",children:"// if 'checklistItem' state is changed, the parent functional component: 'App' will rerun--including heavy memory processes such as 'localStorage'"}),"\n    ",(0,a.jsx)(n.span,{className:"token keyword",children:"const"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"["}),"checklistItem",(0,a.jsx)(n.span,{className:"token punctuation",children:","})," setChecklistItems",(0,a.jsx)(n.span,{className:"token punctuation",children:"]"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token maybe-class-name",children:"React"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"useState"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),"\n        ",(0,a.jsx)(n.span,{className:"token known-class-name class-name",children:"JSON"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"parse"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token dom variable",children:"localStorage"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"getItem"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token string",children:"'checklistItem'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"||"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"["}),(0,a.jsx)(n.span,{className:"token punctuation",children:"]"}),"\n    ",(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n"]})}),"\n",(0,a.jsx)(n.h2,{children:"The Fix"}),"\n",(0,a.jsx)(n.p,{children:"The fix is simple: make state a function. By doing so, we successfully make state run once instead on every state change and initialize state to be lazy--hence lazy state initialization."}),"\n",(0,a.jsx)(n.pre,{className:"language-js",children:(0,a.jsxs)(n.code,{className:"language-js",children:[(0,a.jsx)(n.span,{className:"token keyword module",children:"export"})," ",(0,a.jsx)(n.span,{className:"token keyword module",children:"default"})," ",(0,a.jsx)(n.span,{className:"token function",children:(0,a.jsx)(n.span,{className:"token maybe-class-name",children:"App"})}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(n.span,{className:"token comment",children:"// By making 'checklistItem' state an arrow function, we successfully implement lazy state initialization!"}),"\n    ",(0,a.jsx)(n.span,{className:"token keyword",children:"const"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"["}),"checklistItem",(0,a.jsx)(n.span,{className:"token punctuation",children:","})," setChecklistItems",(0,a.jsx)(n.span,{className:"token punctuation",children:"]"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token maybe-class-name",children:"React"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"useState"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),"\n        ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token arrow operator",children:"=>"})," ",(0,a.jsx)(n.span,{className:"token known-class-name class-name",children:"JSON"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"parse"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token dom variable",children:"localStorage"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"getItem"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token string",children:"'checklistItem'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"||"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"["}),(0,a.jsx)(n.span,{className:"token punctuation",children:"]"}),"\n    ",(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n"]})})]})}n.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.jsx)(l,Object.assign({},e,{children:(0,a.jsx)(o,e)}))}},9008:function(e,n,s){e.exports=s(2636)},1151:function(e,n,s){"use strict";s.d(n,{ah:function(){return c}});var a=s(7294);let t=a.createContext({});function c(e){let n=a.useContext(t);return a.useMemo(()=>"function"==typeof e?e(n):{...n,...e},[n,e])}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=6910)}),_N_E=e.O()}]);