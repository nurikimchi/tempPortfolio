(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[685],{189:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/articles/localStorage-React",function(){return s(204)}])},6295:function(e,n,s){"use strict";s.d(n,{B:function(){return p}});var a=s(5893),t=s(9008),c=s.n(t),r=s(1163),l=s(5649),o=s(6010);function i(e){let{children:n,className:s}=e;return(0,a.jsx)("div",{className:(0,o.Z)(s,"prose dark:prose-invert"),children:n})}var d=s(3652);function m(e){return(0,a.jsx)("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...e,children:(0,a.jsx)("path",{d:"M7.25 11.25 3.75 8m0 0 3.5-3.25M3.75 8h8.5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function p(e){let{children:n,meta:s,isRssFeed:t=!1,previousPathname:o}=e,p=(0,r.useRouter)();return t?n:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c(),{children:[(0,a.jsx)("title",{children:`${s.title} - Nuri Kim`}),(0,a.jsx)("meta",{name:"description",content:s.description})]}),(0,a.jsx)(l.W,{className:"mt-16 lg:mt-32",children:(0,a.jsx)("div",{className:"xl:relative",children:(0,a.jsxs)("div",{className:"mx-auto max-w-2xl",children:[o&&(0,a.jsx)("button",{type:"button",onClick:()=>p.back(),"aria-label":"Go back to articles",className:"group mb-8 flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-md shadow-zinc-800/5 ring-1 ring-zinc-900/5 transition dark:border dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0 dark:ring-white/10 dark:hover:border-zinc-700 dark:hover:ring-white/20 lg:absolute lg:-left-5 lg:-mt-2 lg:mb-0 xl:-top-1.5 xl:left-0 xl:mt-0",children:(0,a.jsx)(m,{className:"h-4 w-4 stroke-zinc-500 transition group-hover:stroke-zinc-700 dark:stroke-zinc-500 dark:group-hover:stroke-zinc-400"})}),(0,a.jsxs)("article",{children:[(0,a.jsxs)("header",{className:"flex flex-col",children:[(0,a.jsx)("h1",{className:"mt-6 text-4xl font-bold tracking-tight text-zinc-800 dark:text-zinc-100 sm:text-5xl",children:s.title}),(0,a.jsxs)("time",{dateTime:s.date,className:"order-first flex items-center text-base text-zinc-400 dark:text-zinc-500",children:[(0,a.jsx)("span",{className:"h-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"}),(0,a.jsx)("span",{className:"ml-3",children:(0,d.p)(s.date)})]})]}),(0,a.jsx)(i,{className:"mt-8",children:n})]})]})})})]})}},3652:function(e,n,s){"use strict";function a(e){return new Date(`${e}T00:00:00Z`).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"})}s.d(n,{p:function(){return a}})},204:function(e,n,s){"use strict";s.r(n),s.d(n,{meta:function(){return r}});var a=s(5893),t=s(1151),c=s(6295);let r={author:"Nuri Kim",date:"2022-07-06",title:"Save and Retrieve Data After A Closed Window In React With localStorage"},l=e=>(0,a.jsx)(c.B,Object.assign({meta:r},e));function o(e){let n=Object.assign({h2:"h2",p:"p",h3:"h3",pre:"pre",code:"code",span:"span",a:"a"},(0,t.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{children:"What is localStorage?"}),"\n",(0,a.jsx)(n.p,{children:"localStorage is a property of JavaScript's window interface\n(an object that represents a browser window with DOM elements).\nIt allows JavaScript websites to save and retrieve key/value pairs\nafter a browser window is closed. It has several methods including\nsetItem(), getItem(), and removeItem() that manage key/value pairs\nmade through localStorage. These pairs can only be strings. Other data types\ncan be managed by localStorage if converted to strings through JSON methods\n(more on that later)."}),"\n",(0,a.jsx)(n.h3,{children:"setItem()"}),"\n",(0,a.jsx)(n.p,{children:"This method creates a new key/value pair that can later be accessed by getItem() and removeItem() after the browser window is closed."}),"\n",(0,a.jsx)(n.pre,{className:"language-js",children:(0,a.jsxs)(n.code,{className:"language-js",children:[(0,a.jsx)(n.span,{className:"token comment",children:"// makes a key: 'myNewKey' with its value 'myNewValue'"}),"\n",(0,a.jsx)(n.span,{className:"token dom variable",children:"localStorage"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"keyItem"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token string",children:"'myNewKey'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(n.span,{className:"token string",children:"'myNewValue'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n"]})}),"\n",(0,a.jsx)(n.h3,{children:"getItem()"}),"\n",(0,a.jsx)(n.p,{children:"This method accesses the value set by setItem() through one parameter, a key value."}),"\n",(0,a.jsx)(n.pre,{className:"language-js",children:(0,a.jsxs)(n.code,{className:"language-js",children:[(0,a.jsx)(n.span,{className:"token comment",children:"// @returns {string} 'myNewValue'"}),"\n",(0,a.jsx)(n.span,{className:"token dom variable",children:"localStorage"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"getItem"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token string",children:"'myNewKey'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n"]})}),"\n",(0,a.jsx)(n.h3,{children:"removeItem()"}),"\n",(0,a.jsx)(n.p,{children:"Like getItem(), removeItem() only needs one parameter, the key value, to remove the key and its value."}),"\n",(0,a.jsx)(n.pre,{className:"language-js",children:(0,a.jsxs)(n.code,{className:"language-js",children:[(0,a.jsx)(n.span,{className:"token comment",children:"// removes 'myNewKey' and its value 'myNewValue'"}),"\n",(0,a.jsx)(n.span,{className:"token dom variable",children:"localStorage"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"removeItem"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token string",children:"'myNewKey'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n"]})}),"\n",(0,a.jsx)(n.h2,{children:"Use Other Data Types in localStorage Through JSON Methods"}),"\n",(0,a.jsx)(n.h3,{children:"JSON.stringify()"}),"\n",(0,a.jsx)(n.p,{children:"Converts any data type into a string. Since localStorage only accepts parameters as strings so you must convert any other data type to a string before passing it as a localStorage parameter."}),"\n",(0,a.jsx)(n.pre,{className:"language-js",children:(0,a.jsxs)(n.code,{className:"language-js",children:[(0,a.jsx)(n.span,{className:"token keyword",children:"const"})," myNewObjectValue ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(n.span,{className:"token literal-property property",children:"id"}),(0,a.jsx)(n.span,{className:"token operator",children:":"})," ",(0,a.jsx)(n.span,{className:"token number",children:"1"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","}),"\n    name ",(0,a.jsx)(n.span,{className:"token string",children:"'Nuri Kim'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(n.span,{className:"token literal-property property",children:"age"}),(0,a.jsx)(n.span,{className:"token operator",children:":"})," ",(0,a.jsx)(n.span,{className:"token number",children:"14"}),"\n",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n\n",(0,a.jsx)(n.span,{className:"token comment",children:"// sets the string version of 'myNewObjectValue' to the key string value 'myNewObjectValue' to localStorage"}),"\n",(0,a.jsx)(n.span,{className:"token dom variable",children:"localStorage"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"setItem"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token string",children:"'myNewObjectKey'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(n.span,{className:"token known-class-name class-name",children:"JSON"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"stringify"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),"myNewObjectValue",(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n"]})}),"\n",(0,a.jsx)(n.h3,{children:"JSON.parse()"}),"\n",(0,a.jsx)(n.p,{children:"Converts a stringified value to its original data type. When string data is saved into localStorage, its value can be retrieved and returned to its original data type through JSON.parse()"}),"\n",(0,a.jsx)(n.pre,{className:"language-js",children:(0,a.jsxs)(n.code,{className:"language-js",children:[(0,a.jsx)(n.span,{className:"token comment",children:"// @returns {object} 'myNewObjectValue' from a string into its original type"}),"\n",(0,a.jsx)(n.span,{className:"token known-class-name class-name",children:"JSON"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"parse"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token dom variable",children:"localStorage"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"getItem"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token string",children:"'nevObjectKey'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n"]})}),"\n",(0,a.jsx)(n.h2,{children:"localStorage and React"}),"\n",(0,a.jsx)(n.h3,{children:"useEffect()"}),"\n",(0,a.jsxs)(n.p,{children:["useEffect is a hook that handles events outside of React including API/database calls, subscriptions (e.g. WebSocket), and ",(0,a.jsx)("b",{children:"localStorage"}),". Combined with a dependency array, you can add a key/value pair into localStorage after a certain value within that array has changed. The array is the second parameter in useEffect(). If an array contains a variable, useEffect() will run everytime that variable has changed. If the second parameter/array is empty, useEffect() will run once after its parent component has finished loading.\nExample: In our checklist app, we want to implement a feature where a user's added items will not disappear after he/she refreshes or closes the browser window. The following code successfully implements this feature to our App component if added to a working codebase:"]}),"\n",(0,a.jsx)(n.pre,{className:"language-js",children:(0,a.jsxs)(n.code,{className:"language-js",children:[(0,a.jsx)(n.span,{className:"token keyword module",children:"export"})," ",(0,a.jsx)(n.span,{className:"token keyword module",children:"default"})," ",(0,a.jsx)(n.span,{className:"token function",children:(0,a.jsx)(n.span,{className:"token maybe-class-name",children:"App"})}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(n.span,{className:"token keyword",children:"const"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"["}),"checklistItem",(0,a.jsx)(n.span,{className:"token punctuation",children:","})," setChecklistItems",(0,a.jsx)(n.span,{className:"token punctuation",children:"]"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token maybe-class-name",children:"React"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"useState"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),"\n        ",(0,a.jsx)(n.span,{className:"token comment",children:"// if there is no 'checklistItem' in localStorage, 'checklistItem' of useState is an empty array"}),"\n        ",(0,a.jsx)(n.span,{className:"token known-class-name class-name",children:"JSON"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"parse"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token dom variable",children:"localStorage"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"getItem"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token string",children:"'checklistItem'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"||"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"["}),(0,a.jsx)(n.span,{className:"token punctuation",children:"]"}),"\n    ",(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n\n    ",(0,a.jsx)(n.span,{className:"token comment",children:"// after a checklistItem is added or changed (see dependency array), set the variable 'checklistItem' as a key with its value being the stringified 'checklistItem'"}),"\n    ",(0,a.jsx)(n.span,{className:"token maybe-class-name",children:"React"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"useEffect"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token arrow operator",children:"=>"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n        ",(0,a.jsx)(n.span,{className:"token dom variable",children:"localStorage"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"setItem"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token string",children:"'checklistItem'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(n.span,{className:"token known-class-name class-name",children:"JSON"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"stringify"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),"checklistItem",(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"["}),"checklistItem",(0,a.jsx)(n.span,{className:"token punctuation",children:"]"}),"\n",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n"]})}),"\n",(0,a.jsx)(n.h2,{children:"Special Thanks"}),"\n",(0,a.jsx)("ul",{children:(0,a.jsx)("li",{children:(0,a.jsxs)(n.p,{children:["Scrimba for their ",(0,a.jsx)(n.a,{href:"https://scrimba.com/learn/learnreact",children:"awesome React course\n"})]})})})]})}n.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.jsx)(l,Object.assign({},e,{children:(0,a.jsx)(o,e)}))}},9008:function(e,n,s){e.exports=s(2636)},1151:function(e,n,s){"use strict";s.d(n,{ah:function(){return c}});var a=s(7294);let t=a.createContext({});function c(e){let n=a.useContext(t);return a.useMemo(()=>"function"==typeof e?e(n):{...n,...e},[n,e])}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=189)}),_N_E=e.O()}]);